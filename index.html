<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Things that make me laugh</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container-fluid">
        <div class="row">

            <div id="giphyButtons">
                <button data-giphy="cats and dogs" class="btn btn-primary">Cats & Dogs</button>
                <button data-giphy="Bob's Burgers" class="btn btn-primary">Bob's Burgers</button>
                <button data-giphy="Step Brothers" class="btn btn-primary">Step Brother's</button>
                <button data-giphy="Adam Sandler" class="btn btn-primary">Adam Sandler</button>
                <button data-giphy="Tommy Boy" class="btn btn-primary">Tommy Boy</button>
                <button data-giphy="Dodgeball Movie" class="btn btn-primary">Dodgeball Movie</button>
                <button data-giphy="Monty Python and the Holy Grail" class="btn btn-primary">Monty Python and the Holy
                    Grail</button>
                <button data-giphy="Brooklyn Nine-Nine" class="btn btn-primary">Brooklyn Nine-Nine</button>
                <button data-giphy="Reading" class="btn btn-primary">Reading</button>
                <button data-giphy="Good food" class="btn btn-primary">Good Food</button>
                <button data-giphy="Pinky and the Brain" class="btn btn-primary">Pinky & The Brain</button>
                <button data-giphy="The Office" class="btn btn-primary">The Office</button>
                <button data-giphy="Melissa McCarthy" class="btn btn-primary">Melissa McCarthy</button>
                <button data-giphy="Elf Movie" class="btn btn-primary">Elf Movie</button>

            </div>
        </div>


        <div class="row">
            <div class="col-lg-9">
                <div id="gifsDisplay"></div>
            </div>

            <div class="col-lg-3">
                <div>
                    <form>
                        What makes you smile? <br>
                        <input type="text" name="search" id="makeSmiles"><br>
                        <!-- <button id="addGiphy" class="submitButton">Submit</button> -->
                        <input id="addGiphy" type="submit" name="submit" class="submitButton">
                    </form>
                </div>
            </div>
        </div>



        <script type="text/javascript">


            //on click function so when buttons are clicked gifs show up 
            var ButtonFunction = function () {
                $('button').on('click', function () {
                    //
                    var myGiphy = $(this).data("giphy");
                    console.log(this);

                    $('#gifsDisplay').empty();

                    var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + myGiphy + "&api_key=4oXRtl5CmpcDy4GbORHP5OmJZfTqmZRO&limit=10";

                    $.ajax({
                        url: queryURL,
                        method: 'GET'
                    }).done(function (response) {
                        console.log(response);
                        //loop through the gifs available
                        for (var i = 0; i < response.data.length; i++) {
                            //create a var for a div which the giphys will be displayed in 
                            var giphyDiv = $('<div class="giphyDisplay">');
                            //create a var for a paragraph tag which the rating will be displayed in 
                            var rating = $('<p class="text-info">').text("Rating: " + response.data[i].rating);
                            //create a var for an image tag which the giphy image will be displayed in
                            var giphyImage = $('<img class="actualGif">');
                            //set the attribute for my giphy image source, data-state, data-still, data-animate
                            giphyImage.attr('src', response.data[i].images.fixed_height_still.url);
                            giphyImage.attr('data-still', response.data[i].images.fixed_height_still.url);
                            giphyImage.attr('data-animate', response.data[i].images.fixed_height.url);
                            giphyImage.attr('data-state', 'still');
                            //call the image tag and attach it to the giphyDiv
                            giphyDiv.html(giphyImage);
                            //call the rating and have it append to the bottom of the  giphyDiv
                            giphyDiv.append(rating);
                            //call the giphyDiv I set up in the last two and append it to the area I specified in my HTML
                            $('#gifsDisplay').append(giphyDiv);



                        }
                        //call the animateFunction after gifs have loaded to the page
                        animateFunction();
                    })
                })
            }



            //on-click event to take in user text
            $('#addGiphy').on('click', function (event) {
                event.preventDefault();
                var smileItem = $('#makeSmiles').val().trim();

                newSmileButton = '<button data-giphy="' + smileItem + '" class="btn btn-primary">' + smileItem + '</button>'

                $('#giphyButtons').append(newSmileButton)

                ButtonFunction();
            })



            //animate gif function
            animateFunction = function () {
                //on-click function to animate the photo
                $('.actualGif').on('click', function () {

                    var state = $(this).attr("data-state");
                    if (state === "still") {
                        $(this).attr("src", $(this).attr("data-animate"));
                        $(this).attr("data-state", "animate");
                    } else {
                        $(this).attr("src", $(this).attr("data-still"));
                        $(this).attr("data-state", "still");
                    }
                })
            };



            $(document).ready(function () {
                ButtonFunction();

            })







        </script>

</body>

</html>